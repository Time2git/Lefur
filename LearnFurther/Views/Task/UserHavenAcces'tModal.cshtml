@using LearnFurther.ViewModels;
@model RequestAccessToTaskViewModel;

<div class="modal-content" id="mdContent">
    <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal">×</button>
    </div>
    <div class="modal-body">
        @Model.Context
    </div>
    <div class="modal-footer">
        <form id="Formm">
            <input type="hidden" asp-for="TaskId" />
            <input type="hidden" asp-for="TestPerson" value="@User.Identity.Name" />
            @*<button type="button" class="btn btn-primary" id="myBtn">Запросить доступ</button>*@
            <button class="btn btn-primary" type="submit" id="button">Запросить доступ</button>
        </form>
    </div>
</div>

<script type="text/javascript">
    $(document).ready(function () {
        $('#Formm').submit(function (event) {
            event.preventDefault();/*$("#myBtn").click(function () {*/
            alert("Запрос доступа");
            var data = $(this).serialize();
            var url = "@Url.Action("AddUserToWaitingList")";
            alert(data);
            alert(url);
            $.post(url, data, function (data) {
                alert("Пользователь добавлен в список ожидающих");
                $('#mdContent').html(data);
            });
        });
    });
</script>